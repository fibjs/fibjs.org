<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"><link rel="icon" type="image/png" href="../../../imgs/icon.png"><title>Synchronous and asynchronous - JavaScript on Fiber</title><link href="../../../css/common.css" rel="stylesheet"><link href="../../../css/docs.css" rel="stylesheet"></head><body><div class="navbar navbar-default navbar-static-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toggle navigation</font></font></span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="../../index.html"><img src="../../../imgs/logo-dark.png"></a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right notranslate"><li><a href="../../index.html">HOME</a></li><li><a href="readme.md.html">GUIDE</a></li><li><a href="../manual/module/readme.md.html">MODULE</a></li><li><a href="../manual/object/readme.md.html">OBJECT</a></li><li><a href="../awesome/readme.md.html">AWESOME</a></li><li><a href="../../../download/index.html">DOWNLOAD</a></li><li class="nav-item dropdown"><a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">LANGUAGE</a><div class="dropdown-menu"><a href="../../../docs/guide/sync.md.html">‰∏≠Êñá</a> <a href="../../../ca/docs/guide/sync.md.html">Catalan</a> <a href="../../../de/docs/guide/sync.md.html">Deutsch</a> <a href="../../../en/docs/guide/sync.md.html">English</a> <a href="../../../es/docs/guide/sync.md.html">Espa√±ol</a> <a href="../../../fr/docs/guide/sync.md.html">Fran√ßais</a> <a href="../../../gl/docs/guide/sync.md.html">Galego</a> <a href="../../../it/docs/guide/sync.md.html">Italiano</a> <a href="../../../nl/docs/guide/sync.md.html">Nederlands</a> <a href="../../../ru/docs/guide/sync.md.html">–†—É—Å—Å–∫–∏–π</a> <a href="../../../ja/docs/guide/sync.md.html">Êó•Êú¨Ë™û</a> <a href="../../../ko/docs/guide/sync.md.html">ÌïúÍµ≠Ïñ¥</a> <a href="../../../zh-tw/docs/guide/sync.md.html">ÁπÅÈ´î‰∏≠Êñá</a></div></li></ul></div></div></div><div class="band"><div class="container"><span class="group"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guide Development Guide</font></font></span><div class="search"><span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input type="text" class="searchbox ds-input" placeholder="Search" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-label="search input" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Avenir, &quot;Segoe UI&quot;, Arial, &quot;Hiragino Sans GB&quot;, ÂÜ¨ÈùíÈªë, &quot;Microsoft YaHei&quot;, ÂæÆËΩØÈõÖÈªë, SimSun, ÂÆã‰Ωì, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="ds-dataset-1"></div></span></span></div></div></div><div class="container"><ol class="breadcrumb"><li><a href="../../index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">front page</font></font></a></li><li><a href="readme.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Development Guide</font></font></a></li><li class="active"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Synchronous and asynchronous</font></font></li></ol></div><div class="page-body"><div class="container"><div class="sidebar hidden-xs"><div class="panel-group" id="accordion" role="tablist">  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_guide" aria-controls="collapse_guide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Development Guide</font></font></a></h4></div><div id="collapse_guide" class="panel-collapse collapse in" aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="about.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is fibjs?</font></font></a></li>
<li><a href="install.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install the operating environment</font></font></a></li>
<li><a href="hello.md.html" class="notranslate">hello, world</a></li>
<li><a href="test.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A better life starts with testing</font></font></a></li>
<li><a href="profiler.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Find the performance killer</font></font></a></li>
<li class="active"><a href="sync.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Synchronous and asynchronous</font></font></a></li>
<li><a href="server-hot-update.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server module hot update</font></font></a></li>
<li><a href="web.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">High performance web application practices</font></font></a></li>
<li><a href="host-routes.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Domain name routing</font></font></a></li>
<li><a href="x509.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use of X509 certificates in fibjs</font></font></a></li>
<li><a href="contribute.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add native module</font></font></a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_module" aria-controls="collapse_module"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic module</font></font></a></h4></div><div id="collapse_module" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../manual/module/ifs/assert.md.html" class="notranslate">assert</a></li>
<li><a href="../manual/module/ifs/base32.md.html" class="notranslate">base32</a></li>
<li><a href="../manual/module/ifs/base58.md.html" class="notranslate">base58</a></li>
<li><a href="../manual/module/ifs/base64.md.html" class="notranslate">base64</a></li>
<li><a href="../manual/module/ifs/child_process.md.html" class="notranslate">child_process</a></li>
<li><a href="../manual/module/ifs/console.md.html" class="notranslate">console</a></li>
<li><a href="../manual/module/ifs/constants.md.html" class="notranslate">constants</a></li>
<li><a href="../manual/module/ifs/coroutine.md.html" class="notranslate">coroutine</a></li>
<li><a href="../manual/module/ifs/crypto.md.html" class="notranslate">crypto</a></li>
<li><a href="../manual/module/ifs/db.md.html" class="notranslate">db</a></li>
<li><a href="../manual/module/ifs/dgram.md.html" class="notranslate">dgram</a></li>
<li><a href="../manual/module/ifs/dns.md.html" class="notranslate">dns</a></li>
<li><a href="../manual/module/ifs/encoding.md.html" class="notranslate">encoding</a></li>
<li><a href="../manual/module/ifs/fs.md.html" class="notranslate">fs</a></li>
<li><a href="../manual/module/ifs/fs_constants.md.html" class="notranslate">fs_constants</a></li>
<li><a href="../manual/module/ifs/gd.md.html" class="notranslate">gd</a></li>
<li><a href="../manual/module/ifs/global.md.html" class="notranslate">global</a></li>
<li><a href="../manual/module/ifs/gui.md.html" class="notranslate">gui</a></li>
<li><a href="../manual/module/ifs/hash.md.html" class="notranslate">hash</a></li>
<li><a href="../manual/module/ifs/hex.md.html" class="notranslate">hex</a></li>
<li><a href="../manual/module/ifs/http.md.html" class="notranslate">http</a></li>
<li><a href="../manual/module/ifs/iconv.md.html" class="notranslate">iconv</a></li>
<li><a href="../manual/module/ifs/io.md.html" class="notranslate">io</a></li>
<li><a href="../manual/module/ifs/json.md.html" class="notranslate">json</a></li>
<li><a href="../manual/module/ifs/mq.md.html" class="notranslate">mq</a></li>
<li><a href="../manual/module/ifs/msgpack.md.html" class="notranslate">msgpack</a></li>
<li><a href="../manual/module/ifs/multibase.md.html" class="notranslate">multibase</a></li>
<li><a href="../manual/module/ifs/net.md.html" class="notranslate">net</a></li>
<li><a href="../manual/module/ifs/os.md.html" class="notranslate">os</a></li>
<li><a href="../manual/module/ifs/path.md.html" class="notranslate">path</a></li>
<li><a href="../manual/module/ifs/path_posix.md.html" class="notranslate">path_posix</a></li>
<li><a href="../manual/module/ifs/path_win32.md.html" class="notranslate">path_win32</a></li>
<li><a href="../manual/module/ifs/perf_hooks.md.html" class="notranslate">perf_hooks</a></li>
<li><a href="../manual/module/ifs/performance.md.html" class="notranslate">performance</a></li>
<li><a href="../manual/module/ifs/process.md.html" class="notranslate">process</a></li>
<li><a href="../manual/module/ifs/profiler.md.html" class="notranslate">profiler</a></li>
<li><a href="../manual/module/ifs/punycode.md.html" class="notranslate">punycode</a></li>
<li><a href="../manual/module/ifs/querystring.md.html" class="notranslate">querystring</a></li>
<li><a href="../manual/module/ifs/registry.md.html" class="notranslate">registry</a></li>
<li><a href="../manual/module/ifs/ssl.md.html" class="notranslate">ssl</a></li>
<li><a href="../manual/module/ifs/string_decoder.md.html" class="notranslate">string_decoder</a></li>
<li><a href="../manual/module/ifs/test.md.html" class="notranslate">test</a></li>
<li><a href="../manual/module/ifs/timers.md.html" class="notranslate">timers</a></li>
<li><a href="../manual/module/ifs/tty.md.html" class="notranslate">tty</a></li>
<li><a href="../manual/module/ifs/types.md.html" class="notranslate">types</a></li>
<li><a href="../manual/module/ifs/url.md.html" class="notranslate">url</a></li>
<li><a href="../manual/module/ifs/util.md.html" class="notranslate">util</a></li>
<li><a href="../manual/module/ifs/uuid.md.html" class="notranslate">uuid</a></li>
<li><a href="../manual/module/ifs/vm.md.html" class="notranslate">vm</a></li>
<li><a href="../manual/module/ifs/worker_threads.md.html" class="notranslate">worker_threads</a></li>
<li><a href="../manual/module/ifs/ws.md.html" class="notranslate">ws</a></li>
<li><a href="../manual/module/ifs/xml.md.html" class="notranslate">xml</a></li>
<li><a href="../manual/module/ifs/zip.md.html" class="notranslate">zip</a></li>
<li><a href="../manual/module/ifs/zlib.md.html" class="notranslate">zlib</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_object" aria-controls="collapse_object"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">built-in objects</font></font></a></h4></div><div id="collapse_object" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../manual/object/ifs/blskey.md.html" class="notranslate">BlsKey</a></li>
<li><a href="../manual/object/ifs/buffer.md.html" class="notranslate">Buffer</a></li>
<li><a href="../manual/object/ifs/bufferedstream.md.html" class="notranslate">BufferedStream</a></li>
<li><a href="../manual/object/ifs/chain.md.html" class="notranslate">Chain</a></li>
<li><a href="../manual/object/ifs/childprocess.md.html" class="notranslate">ChildProcess</a></li>
<li><a href="../manual/object/ifs/cipher.md.html" class="notranslate">Cipher</a></li>
<li><a href="../manual/object/ifs/condition.md.html" class="notranslate">Condition</a></li>
<li><a href="../manual/object/ifs/dbconnection.md.html" class="notranslate">DbConnection</a></li>
<li><a href="../manual/object/ifs/dgramsocket.md.html" class="notranslate">DgramSocket</a></li>
<li><a href="../manual/object/ifs/digest.md.html" class="notranslate">Digest</a></li>
<li><a href="../manual/object/ifs/eckey.md.html" class="notranslate">ECKey</a></li>
<li><a href="../manual/object/ifs/ed25519key.md.html" class="notranslate">Ed25519Key</a></li>
<li><a href="../manual/object/ifs/event.md.html" class="notranslate">Event</a></li>
<li><a href="../manual/object/ifs/eventemitter.md.html" class="notranslate">EventEmitter</a></li>
<li><a href="../manual/object/ifs/fswatcher.md.html" class="notranslate">FSWatcher</a></li>
<li><a href="../manual/object/ifs/fiber.md.html" class="notranslate">Fiber</a></li>
<li><a href="../manual/object/ifs/file.md.html" class="notranslate">File</a></li>
<li><a href="../manual/object/ifs/filehandle.md.html" class="notranslate">FileHandle</a></li>
<li><a href="../manual/object/ifs/handler.md.html" class="notranslate">Handler</a></li>
<li><a href="../manual/object/ifs/heapgraphedge.md.html" class="notranslate">HeapGraphEdge</a></li>
<li><a href="../manual/object/ifs/heapgraphnode.md.html" class="notranslate">HeapGraphNode</a></li>
<li><a href="../manual/object/ifs/heapsnapshot.md.html" class="notranslate">HeapSnapshot</a></li>
<li><a href="../manual/object/ifs/httpclient.md.html" class="notranslate">HttpClient</a></li>
<li><a href="../manual/object/ifs/httpcollection.md.html" class="notranslate">HttpCollection</a></li>
<li><a href="../manual/object/ifs/httpcookie.md.html" class="notranslate">HttpCookie</a></li>
<li><a href="../manual/object/ifs/httphandler.md.html" class="notranslate">HttpHandler</a></li>
<li><a href="../manual/object/ifs/httpmessage.md.html" class="notranslate">HttpMessage</a></li>
<li><a href="../manual/object/ifs/httprepeater.md.html" class="notranslate">HttpRepeater</a></li>
<li><a href="../manual/object/ifs/httprequest.md.html" class="notranslate">HttpRequest</a></li>
<li><a href="../manual/object/ifs/httpresponse.md.html" class="notranslate">HttpResponse</a></li>
<li><a href="../manual/object/ifs/httpserver.md.html" class="notranslate">HttpServer</a></li>
<li><a href="../manual/object/ifs/httpuploaddata.md.html" class="notranslate">HttpUploadData</a></li>
<li><a href="../manual/object/ifs/httpsserver.md.html" class="notranslate">HttpsServer</a></li>
<li><a href="../manual/object/ifs/image.md.html" class="notranslate">Image</a></li>
<li><a href="../manual/object/ifs/iterator.md.html" class="notranslate">Iterator</a></li>
<li><a href="../manual/object/ifs/leveldb.md.html" class="notranslate">LevelDB</a></li>
<li><a href="../manual/object/ifs/lock.md.html" class="notranslate">Lock</a></li>
<li><a href="../manual/object/ifs/lrucache.md.html" class="notranslate">LruCache</a></li>
<li><a href="../manual/object/ifs/memorystream.md.html" class="notranslate">MemoryStream</a></li>
<li><a href="../manual/object/ifs/message.md.html" class="notranslate">Message</a></li>
<li><a href="../manual/object/ifs/mysql.md.html" class="notranslate">MySQL</a></li>
<li><a href="../manual/object/ifs/odbc.md.html" class="notranslate">Odbc</a></li>
<li><a href="../manual/object/ifs/pkey.md.html" class="notranslate">PKey</a></li>
<li><a href="../manual/object/ifs/rangestream.md.html" class="notranslate">RangeStream</a></li>
<li><a href="../manual/object/ifs/redis.md.html" class="notranslate">Redis</a></li>
<li><a href="../manual/object/ifs/redishash.md.html" class="notranslate">RedisHash</a></li>
<li><a href="../manual/object/ifs/redislist.md.html" class="notranslate">RedisList</a></li>
<li><a href="../manual/object/ifs/redisset.md.html" class="notranslate">RedisSet</a></li>
<li><a href="../manual/object/ifs/redissortedset.md.html" class="notranslate">RedisSortedSet</a></li>
<li><a href="../manual/object/ifs/routing.md.html" class="notranslate">Routing</a></li>
<li><a href="../manual/object/ifs/sqlite.md.html" class="notranslate">SQLite</a></li>
<li><a href="../manual/object/ifs/sandbox.md.html" class="notranslate">SandBox</a></li>
<li><a href="../manual/object/ifs/script.md.html" class="notranslate">Script</a></li>
<li><a href="../manual/object/ifs/seekablestream.md.html" class="notranslate">SeekableStream</a></li>
<li><a href="../manual/object/ifs/semaphore.md.html" class="notranslate">Semaphore</a></li>
<li><a href="../manual/object/ifs/service.md.html" class="notranslate">Service</a></li>
<li><a href="../manual/object/ifs/smtp.md.html" class="notranslate">Smtp</a></li>
<li><a href="../manual/object/ifs/socket.md.html" class="notranslate">Socket</a></li>
<li><a href="../manual/object/ifs/sslhandler.md.html" class="notranslate">SslHandler</a></li>
<li><a href="../manual/object/ifs/sslserver.md.html" class="notranslate">SslServer</a></li>
<li><a href="../manual/object/ifs/sslsocket.md.html" class="notranslate">SslSocket</a></li>
<li><a href="../manual/object/ifs/stat.md.html" class="notranslate">Stat</a></li>
<li><a href="../manual/object/ifs/statswatcher.md.html" class="notranslate">StatsWatcher</a></li>
<li><a href="../manual/object/ifs/stream.md.html" class="notranslate">Stream</a></li>
<li><a href="../manual/object/ifs/stringdecoder.md.html" class="notranslate">StringDecoder</a></li>
<li><a href="../manual/object/ifs/ttyinputstream.md.html" class="notranslate">TTYInputStream</a></li>
<li><a href="../manual/object/ifs/ttyoutputstream.md.html" class="notranslate">TTYOutputStream</a></li>
<li><a href="../manual/object/ifs/tcpserver.md.html" class="notranslate">TcpServer</a></li>
<li><a href="../manual/object/ifs/textdecoder.md.html" class="notranslate">TextDecoder</a></li>
<li><a href="../manual/object/ifs/textencoder.md.html" class="notranslate">TextEncoder</a></li>
<li><a href="../manual/object/ifs/timer.md.html" class="notranslate">Timer</a></li>
<li><a href="../manual/object/ifs/urlobject.md.html" class="notranslate">UrlObject</a></li>
<li><a href="../manual/object/ifs/websocket.md.html" class="notranslate">WebSocket</a></li>
<li><a href="../manual/object/ifs/websocketmessage.md.html" class="notranslate">WebSocketMessage</a></li>
<li><a href="../manual/object/ifs/webview.md.html" class="notranslate">WebView</a></li>
<li><a href="../manual/object/ifs/worker.md.html" class="notranslate">Worker</a></li>
<li><a href="../manual/object/ifs/x509cert.md.html" class="notranslate">X509Cert</a></li>
<li><a href="../manual/object/ifs/x509crl.md.html" class="notranslate">X509Crl</a></li>
<li><a href="../manual/object/ifs/x509req.md.html" class="notranslate">X509Req</a></li>
<li><a href="../manual/object/ifs/xmlattr.md.html" class="notranslate">XmlAttr</a></li>
<li><a href="../manual/object/ifs/xmlcdatasection.md.html" class="notranslate">XmlCDATASection</a></li>
<li><a href="../manual/object/ifs/xmlcharacterdata.md.html" class="notranslate">XmlCharacterData</a></li>
<li><a href="../manual/object/ifs/xmlcomment.md.html" class="notranslate">XmlComment</a></li>
<li><a href="../manual/object/ifs/xmldocument.md.html" class="notranslate">XmlDocument</a></li>
<li><a href="../manual/object/ifs/xmldocumenttype.md.html" class="notranslate">XmlDocumentType</a></li>
<li><a href="../manual/object/ifs/xmlelement.md.html" class="notranslate">XmlElement</a></li>
<li><a href="../manual/object/ifs/xmlnamednodemap.md.html" class="notranslate">XmlNamedNodeMap</a></li>
<li><a href="../manual/object/ifs/xmlnode.md.html" class="notranslate">XmlNode</a></li>
<li><a href="../manual/object/ifs/xmlnodelist.md.html" class="notranslate">XmlNodeList</a></li>
<li><a href="../manual/object/ifs/xmlprocessinginstruction.md.html" class="notranslate">XmlProcessingInstruction</a></li>
<li><a href="../manual/object/ifs/xmltext.md.html" class="notranslate">XmlText</a></li>
<li><a href="../manual/object/ifs/zipfile.md.html" class="notranslate">ZipFile</a></li>
<li><a href="../manual/object/ifs/object.md.html" class="notranslate">object</a></li>
</ul>
 </div></div></div>  <div class="panel"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse_awesome" aria-controls="collapse_awesome"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">community module</font></font></a></h4></div><div id="collapse_awesome" class="panel-collapse collapse " aria-labelledby="headingOne"><div class="panel-body"> <ul>
<li><a href="../awesome/module/fib-session.md.html" class="notranslate">fib-session</a></li>
<li><a href="../awesome/module/fib-pool.md.html" class="notranslate">fib-pool</a></li>
<li><a href="../awesome/module/fib-orm.md.html" class="notranslate">fib-orm</a></li>
<li><a href="../awesome/module/fib-app.md.html" class="notranslate">fib-app</a></li>
<li><a href="../awesome/module/fib-kv.md.html" class="notranslate">fib-kv</a></li>
<li><a href="../awesome/module/fib-rpc.md.html" class="notranslate">fib-rpc</a></li>
<li><a href="../awesome/module/fib-qr.md.html" class="notranslate">fib-qr</a></li>
<li><a href="../awesome/module/fib-pug.md.html" class="notranslate">fib-pug</a></li>
<li><a href="../awesome/module/ejs.md.html" class="notranslate">ejs</a></li>
<li><a href="../awesome/module/juicer.md.html" class="notranslate">Juicer</a></li>
<li><a href="../awesome/module/highlight.js.md.html" class="notranslate">highlight.js</a></li>
<li><a href="../awesome/module/marked.md.html" class="notranslate">marked</a></li>
<li><a href="../awesome/module/node-cron.md.html" class="notranslate">node-cron</a></li>
<li><a href="../awesome/module/debug.md.html" class="notranslate">debug</a></li>
<li><a href="../awesome/module/benchmark.js.md.html" class="notranslate">benchmark.js</a></li>
<li><a href="../awesome/module/sinon.md.html" class="notranslate">sinon</a></li>
<li><a href="../awesome/module/node-mime.md.html" class="notranslate">node-mime</a></li>
<li><a href="../awesome/module/validatorjs.md.html" class="notranslate">validatorjs</a></li>
<li><a href="../awesome/module/superstruct.md.html" class="notranslate">superstruct</a></li>
<li><a href="../awesome/module/cluster-server.md.html" class="notranslate">cluster-server</a></li>
<li><a href="../awesome/module/synaptic.md.html" class="notranslate">synaptic</a></li>
<li><a href="../awesome/module/source-map.md.html" class="notranslate">source-map</a></li>
<li><a href="../awesome/module/json-format.md.html" class="notranslate">json-format</a></li>
<li><a href="../awesome/module/viz.js.md.html" class="notranslate">viz.js</a></li>
<li><a href="../awesome/module/nomnoml.md.html" class="notranslate">nomnoml</a></li>
<li><a href="../awesome/module/pegjs.md.html" class="notranslate">pegjs</a></li>
<li><a href="../awesome/module/uglify-js.md.html" class="notranslate">uglify-js</a></li>
<li><a href="../awesome/module/js-beautify.md.html" class="notranslate">js-beautify</a></li>
<li><a href="../awesome/module/chalk-animation.md.html" class="notranslate">chalk-animation</a></li>
<li><a href="../awesome/module/jsrsasign.md.html" class="notranslate">jsrsasign</a></li>
<li><a href="../awesome/module/crypto-js.md.html" class="notranslate">crypto-js</a></li>
<li><a href="../awesome/module/ascii-table.md.html" class="notranslate">ascii-table</a></li>
<li><a href="../awesome/module/logstream.md.html" class="notranslate">logstream</a></li>
<li><a href="../awesome/module/ci.md.html" class="notranslate">ci</a></li>
<li><a href="../awesome/module/fs-readdir-recursive.md.html" class="notranslate">fs-readdir-recursive</a></li>
<li><a href="../awesome/module/mkdirp.md.html" class="notranslate">mkdirp</a></li>
<li><a href="../awesome/module/rmdirr.md.html" class="notranslate">rmdirr</a></li>
<li><a href="../awesome/module/detect-port.md.html" class="notranslate">detect-port</a></li>
<li><a href="../awesome/module/bitcoinjs-lib.md.html" class="notranslate">bitcoinjs-lib</a></li>
<li><a href="../awesome/module/rakuten.md.html" class="notranslate">Rakuten</a></li>
</ul>
 </div></div></div>  </div></div><div class="content"><div class="social-share share-component" data-sites="weibo,twitter" data-description="ÂàÜ‰∫´"></div> <div name="ÂêåÊ≠•ÂíåÂºÇÊ≠•" data-unique="ÂêåÊ≠•ÂíåÂºÇÊ≠•"></div><h1 id="ÂêåÊ≠•ÂíåÂºÇÊ≠•"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Synchronous and asynchronous</font></font></h1>
<div name="ÂºïË®Ä" data-unique="ÂºïË®Ä"></div><h2 id="ÂºïË®Ä"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduction</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As Web applications continue to develop, JavaScript, as a widely used programming language, is also constantly developing and evolving. In Web front-end development, JavaScript is mainly used for browser UI processing. UI development is a typical single-threaded event-driven model, so JavaScript has also formed a programming paradigm with asynchronous processing as the main programming paradigm. However, in large-scale and complex applications, the problems and complexity caused by asynchronous programming are becoming more and more obvious.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The emergence of Node.js brings a new asynchronous programming paradigm to JavaScript: event loops and callback functions. This programming paradigm is efficient and concise, and is suitable for high-concurrency and I/O-intensive scenarios. However, this programming paradigm also brings its own problems and complexities. Especially in large-scale and complex applications, programmers need to deal with the problem of nesting many callback functions and need to deal with the problem of asynchronous call order, which increases the complexity and difficulty of the program.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In order to solve these problems and difficulties, fibjs came into being. fibjs is an application server development framework mainly designed for web back-end development. It is based on the Google v8 JavaScript engine and chooses a different concurrency solution than the traditional callback. fibjs uses fiber to isolate the business complexity caused by asynchronous calls at the framework layer, greatly reducing the difficulty of development and reducing performance problems caused by frequent asynchronous processing in user space. At the same time, compared with the traditional asynchronous programming paradigm, its synchronous programming paradigm has the advantages of more readability, simple logic, and easy maintenance.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the following content, we will introduce the advantages and features of fibjs, and explain how to use its synchronous and asynchronous programming solutions through examples.</font></font></p>
<div name="fiber-ÁÆÄ‰ªã" data-unique="fiber-ÁÆÄ‰ªã"></div><h2 id="fiber-ÁÆÄ‰ªã"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fiber introduction</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fibjs is a high-performance JavaScript server framework based on the v8 engine, mainly for Web back-end development. Started in 2009, it already has high stability and productivity, and has a wide range of application cases at home and abroad.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fibjs, fiber is used to solve the problem between business logic and I/O processing. Fiber is different from traditional concepts such as threads, coroutines, and processes. It is a user-level lightweight thread that can be regarded as a cooperative multi-tasking mechanism. Fiber can perform business logic and I/O operations in different contexts, and manages resources internally through pre-allocation and recycling. Compared with traditional threads and processes, it is more lightweight, more flexible, and more efficient. .</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compared with other thread libraries (such as pthread, WinThread, Boost.Thread, etc.), fiber has the following advantages:</font></font></p>
<ul>
<li><p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Collaborative scheduling</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Fiber is a collaborative scheduling that does not require preemptive scheduling by the kernel or operating system. It reduces frequent context switching, speeds up the running speed of the program, and avoids competition conditions and deadlock problems between threads.</font></font></p>
</li>
<li><p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lightweight</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Each fiber only consumes a small stack space, and a large number of fibers can be created in multi-concurrent applications without causing the problem of occupying too much memory.</font></font></p>
</li>
<li><p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efficiency</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : fiber is implemented based on the characteristics of the JavaScript language itself, and makes full use of the superior performance of the v8 engine, which is faster than traditional thread libraries.</font></font></p>
</li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By using fiber, fibjs can separate business logic and I/O processing, thereby encapsulating asynchronous calls into the form of synchronous calls, making writing and maintaining code simpler and easier to read, and at the same time giving full play to the advantages of the JavaScript language.</font></font></p>
<div name="fibjs-‰∏≠ÁöÑÂêåÊ≠•ÁºñÁ®ã" data-unique="fibjs-‰∏≠ÁöÑÂêåÊ≠•ÁºñÁ®ã"></div><h2 id="fibjs-‰∏≠ÁöÑÂêåÊ≠•ÁºñÁ®ã"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Synchronous programming in fibjs</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In asynchronous programming, the nesting of callback functions may lead to poor readability of the code, easily cause the problem of callback hell, and increase the difficulty of the code and the cost of debugging. The synchronous programming paradigm is more in line with human thinking patterns, making the code structure clearer, easier to read, and easier to maintain, which can greatly improve development efficiency and code quality.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fibjs, synchronous programming is a very popular and commonly used programming paradigm, which makes the structure and logic of the code more intuitive, easy to understand and maintain. Some synchronous programming functions and modules are highly supported in fibjs, such as util.sync, fs.readSync, etc.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fibjs, you can directly call asynchronous functions of built-in objects in a synchronous manner:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> data = fs.readFile(<span class="hljs-string">"/path/to/file"</span>);
<span class="hljs-built_in">console</span>.log(data);
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can also wrap the asynchronous function through util.sync and try...catch, so that the fiber can obtain the return value of the asynchronous call, thereby achieving the synchronization effect, for example:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13</div><span class="hljs-comment">// load module</span>
<span class="hljs-keyword">const</span> coroutine = <span class="hljs-built_in">require</span>(<span class="hljs-string">"coroutine"</span>);
<span class="hljs-keyword">const</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">"util"</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);<font></font>
<font></font>
<span class="hljs-comment">// use util.sync to wrap fs.readFile</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readFile</span>(<span class="hljs-params">path</span>) </span>{
  <span class="hljs-keyword">return</span> util.sync(fs.readFile)(path);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// call the sync function</span>
<span class="hljs-keyword">const</span> data = readFile(<span class="hljs-string">"myfile.txt"</span>);
<span class="hljs-built_in">console</span>.log(data);
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the above example, we defined a function named readFile and used util.sync to encapsulate the asynchronous fs.readFile function into a synchronous function. This function can directly return data through synchronous calls. This synchronous calling method is similar to the traditional JavaScript programming paradigm. The difference is that in fibjs, the thread is not blocked, but the asynchronous effect is achieved through fiber.</font></font></p>
<div name="util.sync-ÁöÑÂéüÁêÜ" data-unique="util.sync-ÁöÑÂéüÁêÜ"></div><h3 id="util.sync-ÁöÑÂéüÁêÜ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How util.sync works</font></font></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">util.sync is an efficient wrapper function of the kernel. The following JavaScript code can achieve similar functions:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</div><span class="hljs-keyword">const</span> coroutine = <span class="hljs-built_in">require</span>(<span class="hljs-string">"coroutine"</span>);<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sync</span>(<span class="hljs-params">func</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_warp</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> ev = <span class="hljs-keyword">new</span> coroutine.Event();
    <span class="hljs-keyword">var</span> e, r;<font></font>
<font></font>
    func.apply(<span class="hljs-keyword">this</span>, [<font></font>
      ...arguments,<font></font>
      <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) </span>{<font></font>
        e = err;<font></font>
        r = result;<font></font>
        ev.set();<font></font>
      }<font></font>
    ]);<font></font>
<font></font>
    ev.wait();<font></font>
    <span class="hljs-keyword">if</span> (e)
      <span class="hljs-keyword">throw</span> e;<font></font>
<font></font>
    <span class="hljs-keyword">return</span> r;<font></font>
  }<font></font>
}<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This code defines a tool function sync for converting an asynchronous callback function into a synchronous calling function. It receives a function func and returns a new function _wrap. This new function implements the function of converting the original function into a synchronous call. In the _wrap function, a new Event object ev is first created for thread scheduling and waiting for asynchronous callback results. Then use the apply method to call the original function func with the specified parameters and a new callback function as parameters. During the calling process, an asynchronous callback occurs, and the new callback function stores the returned results into variables e and r, and wakes up the Event object. Finally, it is decided according to the variable e whether to throw an exception or return the variable r. This function implements a solution for converting asynchronous callback functions into synchronous calls, which can improve the readability and maintainability of the function.</font></font></p>
<div name="fibjs-‰∏≠ÁöÑÂºÇÊ≠•ÁºñÁ®ã" data-unique="fibjs-‰∏≠ÁöÑÂºÇÊ≠•ÁºñÁ®ã"></div><h2 id="fibjs-‰∏≠ÁöÑÂºÇÊ≠•ÁºñÁ®ã"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asynchronous programming in fibjs</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fibjs, most asynchronous methods (including I/O and network request methods, etc.) can support both synchronous and asynchronous calls, which allows developers to choose which method to use according to their programming needs at any time.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taking fs.readFile() as an example, we can use this method in two ways:</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asynchronous method: Process the result of reading the file by passing a callback function, for example:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6</div><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);<font></font>
<font></font>
fs.readFile(<span class="hljs-string">"/path/to/file"</span>, (err, data) =&gt; {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-built_in">console</span>.log(data);<font></font>
});<font></font>
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This method is suitable for situations where you need to perform some operations after reading the file.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Synchronous method: Get the contents of the file by not passing a callback function, for example:</font></font></p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4</div><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> data = fs.readFile(<span class="hljs-string">"/path/to/file"</span>);
<span class="hljs-built_in">console</span>.log(data);
</code></pre>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this example, we obtain the contents of the file by reading the return value data of the file. There is no need to wait for the callback function to complete the file reading before continuing the operation. This method is suitable for situations where you need to perform some operations before reading the file is completed.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It can be seen that this feature of supporting both synchronous and asynchronous calls allows developers to choose to use different methods according to their own needs and development scenarios. In some cases, synchronous code is more readable and easier to maintain and debug; while in some cases, asynchronous code can better improve the response speed and performance of the code.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, you need to be careful when using the synchronization method. In some scenarios, this method may block the current fiber. Therefore, we need to choose the appropriate programming method based on actual needs.</font></font></p>
<div name="ÁªìËÆ∫" data-unique="ÁªìËÆ∫"></div><h2 id="ÁªìËÆ∫"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in conclusion</font></font></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this article, we introduce the synchronous programming style and asynchronous programming solutions of fibjs as well as their advantages and application scenarios. We mentioned that fibjs can reduce operational complexity and improve code development efficiency by using fiber to isolate business logic and performance issues caused by asynchronous processing. At the same time, we also emphasized the advantages of fibjs in I/O processing and memory management, which brings great convenience to development, testing and maintenance.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finally, we encourage readers to explore fibjs in depth and participate in fibjs contributions and community activities. We believe that fibjs will continue to attract the attention and support of the open source community with its powerful performance and ease of use.</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">üëâ„Äê</font></font><a href="server-hot-update.md.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hot update of server module</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Äë</font></font></p>
 <div class="commentbox" id="commentbox" data-loaded="true"><iframe src="https://app.commentbox.io/5670558372986880-proj?id=commentbox&amp;url=file%3A%2F%2F%2FUsers%2Flion%2Fworks%2Ffibjs%2Fdocs%2Fweb%2Fdist%2Fdocs%2Fguide%2Fsync.md.html%23commentbox&amp;tlc_param=tlc&amp;background_color=&amp;text_color=&amp;subtext_color=&amp;sort_order=best" frameborder="0" scrolling="no" style="width: 100%" height="298px" data-comments-loaded="true"></iframe></div></div><div class="sidebar hidden-sm hidden-xs hidden-md"><div id="toc" class="tocify"></div></div></div></div><div class="footer"><div class="container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬© Copyright 2012-2024 fibjs.org | </font></font><a href="../../support.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Support us</font></font></a></div></div><a id="back-to-top" href="#" class="btn btn-default btn-lg back-to-top" role="button" title="" data-toggle="tooltip" data-placement="left" data-original-title=""><span class="glyphicon glyphicon-chevron-up"></span></a><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script><script>commentBox('5670558372986880-proj')</script><script type="text/javascript" src="../../../js/common.js"></script><script type="text/javascript" src="../../../js/docs.js"></script></body></html>
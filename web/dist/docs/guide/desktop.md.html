<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="initial-scale=1,maximum-scale=1,user-scalable=no"><link rel=icon type=image/png href=../../imgs/icon.png><title> å¿«é€Ÿå¼€å‘æ¡Œé¢åº”ç”¨ - JavaScript on Fiber</title><link href=../../css/common.css rel=stylesheet><link href=../../css/docs.css rel=stylesheet></head><body><div class="navbar navbar-default navbar-static-top" role=navigation><div class=container><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=../../index.html><img src=../../imgs/logo-dark.png></a></div><div id=navbar class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right notranslate"><li><a href=../../index.html>HOME</a></li><li><a href=readme.md.html>GUIDE</a></li><li><a href=../manual/module/readme.md.html>MODULE</a></li><li><a href=../manual/object/readme.md.html>OBJECT</a></li><li><a href=../awesome/readme.md.html>AWESOME</a></li><li><a href=../../download/index.html>DOWNLOAD</a></li><li class="nav-item dropdown"><a href=# data-toggle=dropdown aria-haspopup=true aria-expanded=false>LANGUAGE</a><div class=dropdown-menu><a href=../../docs/guide/desktop.md.html>ä¸­æ–‡</a> <a href=../../en/docs/guide/desktop.md.html>ENGLISH</a> <a href=../../ja/docs/guide/desktop.md.html>æ—¥æœ¬èª</a> <a href=../../de/docs/guide/desktop.md.html>Deutsch</a> <a href=../../es/docs/guide/desktop.md.html>EspaÃ±ol</a> <a href=../../fr/docs/guide/desktop.md.html>FranÃ§ais</a> <a href=../../ko/docs/guide/desktop.md.html>í•œêµ­ì–´</a> <a href=../../it/docs/guide/desktop.md.html>Italiano</a> <a href=../../ru/docs/guide/desktop.md.html>Ğ ÑƒÑÑĞºĞ¸Ğ¹</a></div></li></ul></div></div></div><div class=band><div class=container><span class=group> Guide å¼€å‘æŒ‡å— </span><div class=search><input type=text class=searchbox placeholder=Search></div></div></div><div class=container><ol class=breadcrumb><li><a href=../../index.html>é¦–é¡µ</a></li><li><a href=readme.md.html> å¼€å‘æŒ‡å— </a></li><li class=active> å¿«é€Ÿå¼€å‘æ¡Œé¢åº”ç”¨ </li></ol></div><div class=page-body><div class=container><div class="sidebar hidden-xs"><div class=panel-group id=accordion role=tablist>  <div class=panel><div class=panel-heading role=tab id=headingOne><h4 class=panel-title><a data-toggle=collapse data-parent=#accordion href="#collapse_guide" aria-controls="collapse_guide"> å¼€å‘æŒ‡å— </a></h4></div><div id="collapse_guide" class="panel-collapse collapse in" aria-labelledby=headingOne><div class=panel-body> <ul>
<li><a href=about.md.html>fibjs æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href=install.md.html>å®‰è£…è¿è¡Œç¯å¢ƒ</a></li>
<li><a href=hello.md.html class ="notranslate">hello, world</a></li>
<li><a href=test.md.html>ç¾å¥½ç”Ÿæ´»ä»æµ‹è¯•å¼€å§‹</a></li>
<li><a href=profiler.md.html>æ‰¾å‡ºæ€§èƒ½æ€æ‰‹</a></li>
<li class="active"><a href=desktop.md.html>å¿«é€Ÿå¼€å‘æ¡Œé¢åº”ç”¨</a></li>
<li><a href=server-hot-update.md.html>æœåŠ¡ç«¯æ¨¡å—çƒ­æ›´æ–°</a></li>
<li><a href=host-routes.md.html>åŸŸåè·¯ç”±</a></li>
<li><a href=x509.md.html>fibjs ä¸­ X509 è¯ä¹¦çš„ä½¿ç”¨</a></li>
<li><a href=contribute.md.html>æ·»åŠ  native æ¨¡å—</a></li>
</ul>
 </div></div></div>  <div class=panel><div class=panel-heading role=tab id=headingOne><h4 class=panel-title><a data-toggle=collapse data-parent=#accordion href="#collapse_module" aria-controls="collapse_module"> åŸºç¡€æ¨¡å— </a></h4></div><div id="collapse_module" class="panel-collapse collapse " aria-labelledby=headingOne><div class=panel-body> <ul>
<li><a href=../manual/module/ifs/assert.md.html class ="notranslate">assert</a></li>
<li><a href=../manual/module/ifs/base32.md.html class ="notranslate">base32</a></li>
<li><a href=../manual/module/ifs/base64.md.html class ="notranslate">base64</a></li>
<li><a href=../manual/module/ifs/base64vlq.md.html class ="notranslate">base64vlq</a></li>
<li><a href=../manual/module/ifs/bson.md.html class ="notranslate">bson</a></li>
<li><a href=../manual/module/ifs/child_process.md.html class ="notranslate">child_process</a></li>
<li><a href=../manual/module/ifs/console.md.html class ="notranslate">console</a></li>
<li><a href=../manual/module/ifs/constants.md.html class ="notranslate">constants</a></li>
<li><a href=../manual/module/ifs/coroutine.md.html class ="notranslate">coroutine</a></li>
<li><a href=../manual/module/ifs/crypto.md.html class ="notranslate">crypto</a></li>
<li><a href=../manual/module/ifs/db.md.html class ="notranslate">db</a></li>
<li><a href=../manual/module/ifs/dgram.md.html class ="notranslate">dgram</a></li>
<li><a href=../manual/module/ifs/dns.md.html class ="notranslate">dns</a></li>
<li><a href=../manual/module/ifs/encoding.md.html class ="notranslate">encoding</a></li>
<li><a href=../manual/module/ifs/fs.md.html class ="notranslate">fs</a></li>
<li><a href=../manual/module/ifs/gd.md.html class ="notranslate">gd</a></li>
<li><a href=../manual/module/ifs/global.md.html class ="notranslate">global</a></li>
<li><a href=../manual/module/ifs/gui.md.html class ="notranslate">gui</a></li>
<li><a href=../manual/module/ifs/hash.md.html class ="notranslate">hash</a></li>
<li><a href=../manual/module/ifs/hex.md.html class ="notranslate">hex</a></li>
<li><a href=../manual/module/ifs/http.md.html class ="notranslate">http</a></li>
<li><a href=../manual/module/ifs/iconv.md.html class ="notranslate">iconv</a></li>
<li><a href=../manual/module/ifs/io.md.html class ="notranslate">io</a></li>
<li><a href=../manual/module/ifs/json.md.html class ="notranslate">json</a></li>
<li><a href=../manual/module/ifs/mq.md.html class ="notranslate">mq</a></li>
<li><a href=../manual/module/ifs/msgpack.md.html class ="notranslate">msgpack</a></li>
<li><a href=../manual/module/ifs/net.md.html class ="notranslate">net</a></li>
<li><a href=../manual/module/ifs/os.md.html class ="notranslate">os</a></li>
<li><a href=../manual/module/ifs/path.md.html class ="notranslate">path</a></li>
<li><a href=../manual/module/ifs/path_posix.md.html class ="notranslate">path_posix</a></li>
<li><a href=../manual/module/ifs/path_win32.md.html class ="notranslate">path_win32</a></li>
<li><a href=../manual/module/ifs/process.md.html class ="notranslate">process</a></li>
<li><a href=../manual/module/ifs/profiler.md.html class ="notranslate">profiler</a></li>
<li><a href=../manual/module/ifs/punycode.md.html class ="notranslate">punycode</a></li>
<li><a href=../manual/module/ifs/querystring.md.html class ="notranslate">querystring</a></li>
<li><a href=../manual/module/ifs/registry.md.html class ="notranslate">registry</a></li>
<li><a href=../manual/module/ifs/ssl.md.html class ="notranslate">ssl</a></li>
<li><a href=../manual/module/ifs/string_decoder.md.html class ="notranslate">string_decoder</a></li>
<li><a href=../manual/module/ifs/test.md.html class ="notranslate">test</a></li>
<li><a href=../manual/module/ifs/timers.md.html class ="notranslate">timers</a></li>
<li><a href=../manual/module/ifs/tty.md.html class ="notranslate">tty</a></li>
<li><a href=../manual/module/ifs/url.md.html class ="notranslate">url</a></li>
<li><a href=../manual/module/ifs/util.md.html class ="notranslate">util</a></li>
<li><a href=../manual/module/ifs/uuid.md.html class ="notranslate">uuid</a></li>
<li><a href=../manual/module/ifs/vm.md.html class ="notranslate">vm</a></li>
<li><a href=../manual/module/ifs/ws.md.html class ="notranslate">ws</a></li>
<li><a href=../manual/module/ifs/xml.md.html class ="notranslate">xml</a></li>
<li><a href=../manual/module/ifs/zip.md.html class ="notranslate">zip</a></li>
<li><a href=../manual/module/ifs/zlib.md.html class ="notranslate">zlib</a></li>
</ul>
 </div></div></div>  <div class=panel><div class=panel-heading role=tab id=headingOne><h4 class=panel-title><a data-toggle=collapse data-parent=#accordion href="#collapse_object" aria-controls="collapse_object"> å†…ç½®å¯¹è±¡ </a></h4></div><div id="collapse_object" class="panel-collapse collapse " aria-labelledby=headingOne><div class=panel-body> <ul>
<li><a href=../manual/object/ifs/buffer.md.html class ="notranslate">Buffer</a></li>
<li><a href=../manual/object/ifs/bufferedstream.md.html class ="notranslate">BufferedStream</a></li>
<li><a href=../manual/object/ifs/chain.md.html class ="notranslate">Chain</a></li>
<li><a href=../manual/object/ifs/childprocess.md.html class ="notranslate">ChildProcess</a></li>
<li><a href=../manual/object/ifs/cipher.md.html class ="notranslate">Cipher</a></li>
<li><a href=../manual/object/ifs/condition.md.html class ="notranslate">Condition</a></li>
<li><a href=../manual/object/ifs/dbconnection.md.html class ="notranslate">DbConnection</a></li>
<li><a href=../manual/object/ifs/dgramsocket.md.html class ="notranslate">DgramSocket</a></li>
<li><a href=../manual/object/ifs/digest.md.html class ="notranslate">Digest</a></li>
<li><a href=../manual/object/ifs/event.md.html class ="notranslate">Event</a></li>
<li><a href=../manual/object/ifs/eventemitter.md.html class ="notranslate">EventEmitter</a></li>
<li><a href=../manual/object/ifs/fswatcher.md.html class ="notranslate">FSWatcher</a></li>
<li><a href=../manual/object/ifs/fiber.md.html class ="notranslate">Fiber</a></li>
<li><a href=../manual/object/ifs/file.md.html class ="notranslate">File</a></li>
<li><a href=../manual/object/ifs/handler.md.html class ="notranslate">Handler</a></li>
<li><a href=../manual/object/ifs/heapgraphedge.md.html class ="notranslate">HeapGraphEdge</a></li>
<li><a href=../manual/object/ifs/heapgraphnode.md.html class ="notranslate">HeapGraphNode</a></li>
<li><a href=../manual/object/ifs/heapsnapshot.md.html class ="notranslate">HeapSnapshot</a></li>
<li><a href=../manual/object/ifs/httpclient.md.html class ="notranslate">HttpClient</a></li>
<li><a href=../manual/object/ifs/httpcollection.md.html class ="notranslate">HttpCollection</a></li>
<li><a href=../manual/object/ifs/httpcookie.md.html class ="notranslate">HttpCookie</a></li>
<li><a href=../manual/object/ifs/httphandler.md.html class ="notranslate">HttpHandler</a></li>
<li><a href=../manual/object/ifs/httpmessage.md.html class ="notranslate">HttpMessage</a></li>
<li><a href=../manual/object/ifs/httprepeater.md.html class ="notranslate">HttpRepeater</a></li>
<li><a href=../manual/object/ifs/httprequest.md.html class ="notranslate">HttpRequest</a></li>
<li><a href=../manual/object/ifs/httpresponse.md.html class ="notranslate">HttpResponse</a></li>
<li><a href=../manual/object/ifs/httpserver.md.html class ="notranslate">HttpServer</a></li>
<li><a href=../manual/object/ifs/httpuploaddata.md.html class ="notranslate">HttpUploadData</a></li>
<li><a href=../manual/object/ifs/httpsserver.md.html class ="notranslate">HttpsServer</a></li>
<li><a href=../manual/object/ifs/image.md.html class ="notranslate">Image</a></li>
<li><a href=../manual/object/ifs/leveldb.md.html class ="notranslate">LevelDB</a></li>
<li><a href=../manual/object/ifs/lock.md.html class ="notranslate">Lock</a></li>
<li><a href=../manual/object/ifs/lrucache.md.html class ="notranslate">LruCache</a></li>
<li><a href=../manual/object/ifs/mssql.md.html class ="notranslate">MSSQL</a></li>
<li><a href=../manual/object/ifs/memorystream.md.html class ="notranslate">MemoryStream</a></li>
<li><a href=../manual/object/ifs/message.md.html class ="notranslate">Message</a></li>
<li><a href=../manual/object/ifs/mongocollection.md.html class ="notranslate">MongoCollection</a></li>
<li><a href=../manual/object/ifs/mongocursor.md.html class ="notranslate">MongoCursor</a></li>
<li><a href=../manual/object/ifs/mongodb.md.html class ="notranslate">MongoDB</a></li>
<li><a href=../manual/object/ifs/mongoid.md.html class ="notranslate">MongoID</a></li>
<li><a href=../manual/object/ifs/mysql.md.html class ="notranslate">MySQL</a></li>
<li><a href=../manual/object/ifs/pkey.md.html class ="notranslate">PKey</a></li>
<li><a href=../manual/object/ifs/rangestream.md.html class ="notranslate">RangeStream</a></li>
<li><a href=../manual/object/ifs/redis.md.html class ="notranslate">Redis</a></li>
<li><a href=../manual/object/ifs/redishash.md.html class ="notranslate">RedisHash</a></li>
<li><a href=../manual/object/ifs/redislist.md.html class ="notranslate">RedisList</a></li>
<li><a href=../manual/object/ifs/redisset.md.html class ="notranslate">RedisSet</a></li>
<li><a href=../manual/object/ifs/redissortedset.md.html class ="notranslate">RedisSortedSet</a></li>
<li><a href=../manual/object/ifs/routing.md.html class ="notranslate">Routing</a></li>
<li><a href=../manual/object/ifs/sqlite.md.html class ="notranslate">SQLite</a></li>
<li><a href=../manual/object/ifs/sandbox.md.html class ="notranslate">SandBox</a></li>
<li><a href=../manual/object/ifs/seekablestream.md.html class ="notranslate">SeekableStream</a></li>
<li><a href=../manual/object/ifs/semaphore.md.html class ="notranslate">Semaphore</a></li>
<li><a href=../manual/object/ifs/service.md.html class ="notranslate">Service</a></li>
<li><a href=../manual/object/ifs/smtp.md.html class ="notranslate">Smtp</a></li>
<li><a href=../manual/object/ifs/socket.md.html class ="notranslate">Socket</a></li>
<li><a href=../manual/object/ifs/sslhandler.md.html class ="notranslate">SslHandler</a></li>
<li><a href=../manual/object/ifs/sslserver.md.html class ="notranslate">SslServer</a></li>
<li><a href=../manual/object/ifs/sslsocket.md.html class ="notranslate">SslSocket</a></li>
<li><a href=../manual/object/ifs/stat.md.html class ="notranslate">Stat</a></li>
<li><a href=../manual/object/ifs/statswatcher.md.html class ="notranslate">StatsWatcher</a></li>
<li><a href=../manual/object/ifs/stream.md.html class ="notranslate">Stream</a></li>
<li><a href=../manual/object/ifs/stringdecoder.md.html class ="notranslate">StringDecoder</a></li>
<li><a href=../manual/object/ifs/tcpserver.md.html class ="notranslate">TcpServer</a></li>
<li><a href=../manual/object/ifs/timer.md.html class ="notranslate">Timer</a></li>
<li><a href=../manual/object/ifs/urlobject.md.html class ="notranslate">UrlObject</a></li>
<li><a href=../manual/object/ifs/websocket.md.html class ="notranslate">WebSocket</a></li>
<li><a href=../manual/object/ifs/websocketmessage.md.html class ="notranslate">WebSocketMessage</a></li>
<li><a href=../manual/object/ifs/webview.md.html class ="notranslate">WebView</a></li>
<li><a href=../manual/object/ifs/worker.md.html class ="notranslate">Worker</a></li>
<li><a href=../manual/object/ifs/x509cert.md.html class ="notranslate">X509Cert</a></li>
<li><a href=../manual/object/ifs/x509crl.md.html class ="notranslate">X509Crl</a></li>
<li><a href=../manual/object/ifs/x509req.md.html class ="notranslate">X509Req</a></li>
<li><a href=../manual/object/ifs/xmlattr.md.html class ="notranslate">XmlAttr</a></li>
<li><a href=../manual/object/ifs/xmlcdatasection.md.html class ="notranslate">XmlCDATASection</a></li>
<li><a href=../manual/object/ifs/xmlcharacterdata.md.html class ="notranslate">XmlCharacterData</a></li>
<li><a href=../manual/object/ifs/xmlcomment.md.html class ="notranslate">XmlComment</a></li>
<li><a href=../manual/object/ifs/xmldocument.md.html class ="notranslate">XmlDocument</a></li>
<li><a href=../manual/object/ifs/xmldocumenttype.md.html class ="notranslate">XmlDocumentType</a></li>
<li><a href=../manual/object/ifs/xmlelement.md.html class ="notranslate">XmlElement</a></li>
<li><a href=../manual/object/ifs/xmlnamednodemap.md.html class ="notranslate">XmlNamedNodeMap</a></li>
<li><a href=../manual/object/ifs/xmlnode.md.html class ="notranslate">XmlNode</a></li>
<li><a href=../manual/object/ifs/xmlnodelist.md.html class ="notranslate">XmlNodeList</a></li>
<li><a href=../manual/object/ifs/xmlprocessinginstruction.md.html class ="notranslate">XmlProcessingInstruction</a></li>
<li><a href=../manual/object/ifs/xmltext.md.html class ="notranslate">XmlText</a></li>
<li><a href=../manual/object/ifs/zipfile.md.html class ="notranslate">ZipFile</a></li>
<li><a href=../manual/object/ifs/object.md.html class ="notranslate">object</a></li>
</ul>
 </div></div></div>  <div class=panel><div class=panel-heading role=tab id=headingOne><h4 class=panel-title><a data-toggle=collapse data-parent=#accordion href="#collapse_awesome" aria-controls="collapse_awesome"> ç¤¾åŒºæ¨¡å— </a></h4></div><div id="collapse_awesome" class="panel-collapse collapse " aria-labelledby=headingOne><div class=panel-body> <ul>
<li><a href=../awesome/module/fib-session.md.html class ="notranslate">fib-session</a></li>
<li><a href=../awesome/module/fib-pool.md.html class ="notranslate">fib-pool</a></li>
<li><a href=../awesome/module/fib-orm.md.html class ="notranslate">fib-orm</a></li>
<li><a href=../awesome/module/fib-app.md.html class ="notranslate">fib-app</a></li>
<li><a href=../awesome/module/fib-kv.md.html class ="notranslate">fib-kv</a></li>
<li><a href=../awesome/module/fib-rpc.md.html class ="notranslate">fib-rpc</a></li>
<li><a href=../awesome/module/fib-qr.md.html class ="notranslate">fib-qr</a></li>
<li><a href=../awesome/module/fib-pug.md.html class ="notranslate">fib-pug</a></li>
<li><a href=../awesome/module/ejs.md.html class ="notranslate">ejs</a></li>
<li><a href=../awesome/module/juicer.md.html class ="notranslate">Juicer</a></li>
<li><a href=../awesome/module/highlight.js.md.html class ="notranslate">highlight.js</a></li>
<li><a href=../awesome/module/marked.md.html class ="notranslate">marked</a></li>
<li><a href=../awesome/module/node-cron.md.html class ="notranslate">node-cron</a></li>
<li><a href=../awesome/module/debug.md.html class ="notranslate">debug</a></li>
<li><a href=../awesome/module/benchmark.js.md.html class ="notranslate">benchmark.js</a></li>
<li><a href=../awesome/module/sinon.md.html class ="notranslate">sinon</a></li>
<li><a href=../awesome/module/node-mime.md.html class ="notranslate">node-mime</a></li>
<li><a href=../awesome/module/validatorjs.md.html class ="notranslate">validatorjs</a></li>
<li><a href=../awesome/module/superstruct.md.html class ="notranslate">superstruct</a></li>
<li><a href=../awesome/module/cluster-server.md.html class ="notranslate">cluster-server</a></li>
<li><a href=../awesome/module/synaptic.md.html class ="notranslate">synaptic</a></li>
<li><a href=../awesome/module/source-map.md.html class ="notranslate">source-map</a></li>
<li><a href=../awesome/module/json-format.md.html class ="notranslate">json-format</a></li>
<li><a href=../awesome/module/viz.js.md.html class ="notranslate">viz.js</a></li>
<li><a href=../awesome/module/nomnoml.md.html class ="notranslate">nomnoml</a></li>
<li><a href=../awesome/module/pegjs.md.html class ="notranslate">pegjs</a></li>
<li><a href=../awesome/module/uglify-js.md.html class ="notranslate">uglify-js</a></li>
<li><a href=../awesome/module/js-beautify.md.html class ="notranslate">js-beautify</a></li>
<li><a href=../awesome/module/chalk-animation.md.html class ="notranslate">chalk-animation</a></li>
<li><a href=../awesome/module/jsrsasign.md.html class ="notranslate">jsrsasign</a></li>
<li><a href=../awesome/module/crypto-js.md.html class ="notranslate">crypto-js</a></li>
<li><a href=../awesome/module/ascii-table.md.html class ="notranslate">ascii-table</a></li>
<li><a href=../awesome/module/logstream.md.html class ="notranslate">logstream</a></li>
<li><a href=../awesome/module/ci.md.html class ="notranslate">ci</a></li>
<li><a href=../awesome/module/fs-readdir-recursive.md.html class ="notranslate">fs-readdir-recursive</a></li>
<li><a href=../awesome/module/mkdirp.md.html class ="notranslate">mkdirp</a></li>
<li><a href=../awesome/module/rmdirr.md.html class ="notranslate">rmdirr</a></li>
<li><a href=../awesome/module/detect-port.md.html class ="notranslate">detect-port</a></li>
<li><a href=../awesome/module/bitcoinjs-lib.md.html class ="notranslate">bitcoinjs-lib</a></li>
<li><a href=../awesome/module/rakuten.md.html class ="notranslate">Rakuten</a></li>
</ul>
 </div></div></div>  </div></div><div class=content><div class=social-share data-sites=weibo,twitter data-description=åˆ†äº«></div> <h1 id="å¿«é€Ÿå¼€å‘æ¡Œé¢åº”ç”¨">å¿«é€Ÿå¼€å‘æ¡Œé¢åº”ç”¨</h1>
<p>åœ¨ fibjs ä¸­å¯åŠ¨ä¸€ä¸ªæ¡Œé¢åº”ç”¨æ˜¯å¾ˆå¿«çš„ï¼Œåªéœ€è¦é”®å…¥ä»¥ä¸‹ä»£ç ï¼Œå³å¯æ‰“å¼€å¹¶è¿è¡Œä¸€ä¸ª WebView çª—å£ï¼š</p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5</div><span class="hljs-keyword">var</span> gui = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gui"</span>);

gui.open(<span class="hljs-string">"https://fibjs.org"</span>, {
    <span class="hljs-string">"native"</span>: <span class="hljs-literal">true</span>
});
</code></pre>
<p>è¿™æ®µä»£ç ä¼šæ‰“å¼€ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…ç½®çš„ WebView çª—å£ï¼Œå¹¶è¿›å…¥ fibjs.org çš„ç½‘ç«™ã€‚</p>
<p>ç„¶è€Œï¼Œç³»ç»Ÿå†…ç½®çš„ WebView æ— è®ºåœ¨æ¥å£åŠŸèƒ½è¿˜æ˜¯å…¼å®¹æ€§ï¼Œéƒ½ä¸èƒ½æ»¡è¶³å¼ºå¤§çš„æ¡Œé¢åº”ç”¨å¼€å‘ã€‚å› æ­¤ fibjs è¿˜æ”¯æŒåŸºäº cef çš„åº”ç”¨å¼€å‘ã€‚</p>
<h2 id="cef-ç®€ä»‹">cef ç®€ä»‹</h2>
<p>cef å…¨ç§° Chromium Embedded Frameworkï¼Œæ˜¯ä¸€ä¸ªåŸºäº Google Chromium çš„å¼€æºé¡¹ç›®ã€‚Google Chromium é¡¹ç›®ä¸»è¦æ˜¯ä¸º Google Chrome åº”ç”¨å¼€å‘çš„ï¼Œè€Œ cef çš„ç›®æ ‡åˆ™æ˜¯ä¸ºç¬¬ä¸‰æ–¹åº”ç”¨æä¾›å¯åµŒå…¥æµè§ˆå™¨æ”¯æŒã€‚cef éš”ç¦»åº•å±‚ Chromium å’Œ Blink çš„å¤æ‚ä»£ç ï¼Œå¹¶æä¾›ä¸€å¥—äº§å“çº§ç¨³å®šçš„ APIï¼Œå‘å¸ƒè·Ÿè¸ªå…·ä½“ Chromium ç‰ˆæœ¬çš„åˆ†æ”¯ï¼Œä»¥åŠäºŒè¿›åˆ¶åŒ…ã€‚cef çš„å¤§éƒ¨åˆ†ç‰¹æ€§éƒ½æä¾›äº†ä¸°å¯Œçš„é»˜è®¤å®ç°ï¼Œè®©ä½¿ç”¨è€…åšå°½é‡å°‘çš„å®šåˆ¶å³å¯æ»¡è¶³éœ€æ±‚ã€‚cef çš„å…¸å‹åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>åµŒå…¥ä¸€ä¸ªå…¼å®¹ HTML5 çš„æµè§ˆå™¨æ§ä»¶åˆ°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æœ¬åœ°åº”ç”¨ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªè½»é‡åŒ–çš„å£³æµè§ˆå™¨ï¼Œç”¨ä»¥æ‰˜ç®¡ä¸»è¦ç”¨ Web æŠ€æœ¯å¼€å‘çš„åº”ç”¨ã€‚</li>
<li>æœ‰äº›åº”ç”¨æœ‰ç‹¬ç«‹çš„ç»˜åˆ¶æ¡†æ¶ï¼Œä½¿ç”¨ cef å¯¹ Web å†…å®¹åšç¦»çº¿æ¸²æŸ“ã€‚</li>
<li>ä½¿ç”¨ cef åšè‡ªåŠ¨åŒ– Web æµ‹è¯•ã€‚</li>
</ul>
<p>cef3 æ˜¯åŸºäº Chomuim Content API å¤šè¿›ç¨‹æ„æ¶çš„ä¸‹ä¸€ä»£ cefï¼Œæ‹¥æœ‰ä¸‹åˆ—ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ”¹è¿›çš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼ˆJavaScript å’Œæ’ä»¶åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹å†…æ‰§è¡Œï¼‰ã€‚</li>
<li>æ”¯æŒ Retina æ˜¾ç¤ºå™¨ã€‚</li>
<li>æ”¯æŒ WebGL å’Œ 3D CSS çš„ GPU åŠ é€Ÿã€‚</li>
<li>ç±»ä¼¼ WebRTC å’Œè¯­éŸ³è¾“å…¥è¿™æ ·çš„å‰å«ç‰¹æ€§ã€‚</li>
<li>é€šè¿‡ DevTools è¿œç¨‹è°ƒè¯•åè®®ä»¥åŠ ChromeDriver2 æä¾›æ›´å¥½çš„è‡ªåŠ¨åŒ–UIæµ‹è¯•ã€‚</li>
<li>æ›´å¿«è·å¾—å½“å‰ä»¥åŠæœªæ¥çš„ Web ç‰¹æ€§å’Œæ ‡å‡†çš„èƒ½åŠ›ã€‚</li>
</ul>
<h2 id="å‡†å¤‡è¿è¡Œç¯å¢ƒ">å‡†å¤‡è¿è¡Œç¯å¢ƒ</h2>
<p>cef3 çš„äºŒè¿›åˆ¶åŒ…å¯ä»¥åœ¨ [<a href="https://cef-builds.spotifycdn.com/index.html">è¿™ä¸ªé¡µé¢</a>] ä¸‹è½½ã€‚å…¶ä¸­åŒ…å«äº†åœ¨ç‰¹å®šå¹³å°ï¼ˆWindowsï¼ŒMac OS X ä»¥åŠ Linuxï¼‰ç¼–è¯‘ç‰¹å®šç‰ˆæœ¬ cef3 æ‰€éœ€çš„å…¨éƒ¨æ–‡ä»¶ã€‚ä¸åŒå¹³å°çš„ç›®å½•ç»“æ„ä¸å¤ªï¼Œä½ éœ€è¦åœ¨ä¸‹è½½åé‡æ–°ç»„ç»‡èµ„æºç›®å½•ç»“æ„ã€‚</p>
<h3 id="Windows-æ“ä½œç³»ç»Ÿ(Windows)">Windows æ“ä½œç³»ç»Ÿ(Windows)</h3>
<p>åœ¨ Windows å¹³å°ä¸Šæ–‡ä»¶å¤¹ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼Œä½ é€šå¸¸å¯ä»¥åœ¨äºŒè¿›åˆ¶åŒ…å†…çš„ <code>Release</code> å’Œ <code>Resources</code> ç›®å½•ä¸‹æ‰¾åˆ°å…¨éƒ¨æ–‡ä»¶ï¼š</p>
<pre><code class="lang-bash"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</div>Application
â”œâ”€â”€ fibjs.exe
â”œâ”€â”€ cef.pak
â”œâ”€â”€ cef_100_percent.pak
â”œâ”€â”€ cef_200_percent.pak
â”œâ”€â”€ cef_extensions.pak
â”œâ”€â”€ cef_sandbox.lib
â”œâ”€â”€ chrome_elf.dll
â”œâ”€â”€ d3dcompiler_47.dll
â”œâ”€â”€ devtools_resources.pak
â”œâ”€â”€ icudtl.dat
â”œâ”€â”€ libEGL.dll
â”œâ”€â”€ libGLESv2.dll
â”œâ”€â”€ libcef.dll
â”œâ”€â”€ libcef.lib
â”œâ”€â”€ locales
â”‚   â”œâ”€â”€ am.pak
â”‚   â”œâ”€â”€ ......
â”‚   â””â”€â”€ zh-TW.pak
â”œâ”€â”€ snapshot_blob.bin
â”œâ”€â”€ swiftshader
â”‚   â”œâ”€â”€ libEGL.dll
â”‚   â””â”€â”€ libGLESv2.dll
â””â”€â”€ v8_context_snapshot.bin
</code></pre>
<h3 id="Linux-æ“ä½œç³»ç»Ÿ(Linux)">Linux æ“ä½œç³»ç»Ÿ(Linux)</h3>
<p>åœ¨ Linux å¹³å°ä¸Šæ–‡ä»¶å¤¹ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼Œä½ é€šå¸¸å¯ä»¥åœ¨äºŒè¿›åˆ¶åŒ…å†…çš„ <code>Release</code> å’Œ <code>Resources</code> ç›®å½•ä¸‹æ‰¾åˆ°å…¨éƒ¨æ–‡ä»¶ï¼š</p>
<pre><code class="lang-bash"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</div>Application
â”œâ”€â”€ fibjs
â”œâ”€â”€ cef.pak
â”œâ”€â”€ cef_100_percent.pak
â”œâ”€â”€ cef_200_percent.pak
â”œâ”€â”€ cef_extensions.pak
â”œâ”€â”€ devtools_resources.pak
â”œâ”€â”€ icudtl.dat
â”œâ”€â”€ libEGL.so
â”œâ”€â”€ libGLESv2.so
â”œâ”€â”€ libcef.so
â”œâ”€â”€ locales
â”‚   â”œâ”€â”€ am.pak
â”‚   â”œâ”€â”€ ......
â”‚   â””â”€â”€ zh-TW.pak
â”œâ”€â”€ snapshot_blob.bin
â”œâ”€â”€ swiftshader
â”‚   â”œâ”€â”€ libEGL.so
â”‚   â””â”€â”€ libGLESv2.so
â””â”€â”€ v8_context_snapshot.bin
</code></pre>
<p>åœ¨ Linux Server ä¸Šå› ä¸ºæ²¡æœ‰æ¡Œé¢ç¯å¢ƒæ”¯æŒï¼Œåªå¯ä»¥ä»¥ <code>--headless</code> æ¨¡å¼è¿è¡Œï¼Œå½“ä»¥æ— çª—å£æ¨¡å¼è¿è¡Œæ—¶ï¼Œéœ€è¦å®‰è£… xorgï¼š</p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>apt install xorg
</code></pre>
<p>åœ¨ä¸€äº› gpu æ”¯æŒä¸å¥½çš„ Linux Desktopï¼Œè¿˜éœ€è¦å¢åŠ  <code>--disable-gpu</code> å¯åŠ¨é€‰é¡¹ç¦ç”¨ gpu æ¸²æŸ“ã€‚</p>
<h3 id="Mac-X-å¹³å°(Mac-OS-X)">Mac X å¹³å°(Mac OS X)</h3>
<p>åœ¨ Mac X å¹³å°ä¸Šæ–‡ä»¶å¤¹ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼Œä½ é€šå¸¸å¯ä»¥åœ¨äºŒè¿›åˆ¶åŒ…å†…çš„ <code>Release/Chromium Embedded Framework.framework</code> ç›®å½•ä¸‹æ‰¾åˆ°å…¨éƒ¨æ–‡ä»¶ï¼Œå¦‚æœä½ ä¸‹è½½çš„æ˜¯ cefclientï¼Œé‚£ä¹ˆä½ éœ€è¦æ‰“å¼€ app çš„ Contents æ‰¾åˆ°ç›¸åº”çš„æ–‡ä»¶ï¼š</p>
<pre><code class="lang-bash"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</div>Application
â”œâ”€â”€ fibjs
â”œâ”€â”€ Chromium Embedded Framework
â”œâ”€â”€ Libraries
â”‚   â”œâ”€â”€ libEGL.dylib
â”‚   â”œâ”€â”€ libGLESv2.dylib
â”‚   â”œâ”€â”€ libswiftshader_libEGL.dylib
â”‚   â”œâ”€â”€ libswiftshader_libGLESv2.dylib
â”‚   â”œâ”€â”€ libvk_swiftshader.dylib
â”‚   â””â”€â”€ vk_swiftshader_icd.json
â””â”€â”€ Resources
    â”œâ”€â”€ Info.plist
    â”œâ”€â”€ ......
    â””â”€â”€ zh_TW.lproj
        â””â”€â”€ locale.pak 
</code></pre>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>gui.config</code> è®¾ç½® <code>cef_path</code> æ¥æŒ‡å®š cef çš„äºŒè¿›åˆ¶è·¯å¾„ï¼Œä»è€Œæ›´åŠ çµæ´»åœ°éƒ¨ç½²è¿è¡Œç¯å¢ƒã€‚å½“æœªè®¾å®š <code>cef_path</code> æ—¶ï¼Œcef äºŒè¿›åˆ¶æ–‡ä»¶å¿…é¡»ä¸ fibjs æ‰§è¡Œæ–‡ä»¶éƒ¨ç½²åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚</p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3</div>gui.config({
    <span class="hljs-string">"cef_path"</span>: cef_path
});
</code></pre>
<p>å‡†å¤‡å¥½è¿è¡Œç¯å¢ƒï¼Œå†è¿è¡Œä»¥ä¸‹ä»£ç </p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5</div><span class="hljs-keyword">var</span> gui = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gui"</span>);

gui.open(<span class="hljs-string">"https://fibjs.org"</span>, {
    <span class="hljs-comment">// "native": true</span>
});
</code></pre>
<p>åŒæ ·ä¼šçœ‹åˆ°ä¸€ä¸ªåŠ è½½äº† fibjs å®˜ç½‘çš„æµè§ˆå™¨çª—å£ï¼Œä½†æ˜¯å®ƒçš„å¼•æ“å·²ç»æ˜¯æœ€æ–°çš„ Chrome å†…æ ¸äº†ã€‚æ³¨æ„æ­¤å¤„éœ€è¦å–æ¶ˆ <code>native</code> é€‰é¡¹ï¼Œå¦åˆ™è¿˜å°†æ‰“å¼€ os å†…ç½®çš„ webviewã€‚</p>
<p>gui çš„åŸºç¡€åº”ç”¨ååˆ†ç®€ä¾¿ï¼Œå‚ç…§ gui æ–‡æ¡£å³å¯è¿…é€Ÿå®ç°ï¼Œä¸å†èµ˜è¿°ã€‚æ¥ä¸‹æ¥ä¸»è¦ä»‹ç»ä¸€äº›ç‰¹åˆ«çš„åº”ç”¨æ–¹å¼ã€‚</p>
<h2 id="å‰åç«¯æœåŠ¡å¯¹æ¥">å‰åç«¯æœåŠ¡å¯¹æ¥</h2>
<p>åŸºäº web çš„æ¡Œé¢åº”ç”¨é€šå¸¸æœ‰ä¸¤ç§æ‰©å±•æ–¹å¼ï¼Œä¸€ç§æ˜¯ WebView æ‰©å±•ï¼Œå¦ä¸€ç§æ˜¯åœ¨æœ¬åœ°å®ç°å‰åç«¯åˆ†ç¦»ã€‚å‰ä¸€ç§æ–¹å¼ï¼Œå¯¹ WebView åšäº†ä¾µå…¥å¼æ‰©å±•ï¼Œè¿è¡Œç¯å¢ƒä¸æ ‡å‡†çš„æµè§ˆå™¨å…¶å®å·²ç»ä¸å†å…¼å®¹ã€‚åä¸€ç§æ–¹å¼åˆ™éœ€è¦åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ª http Serverï¼Œè¿™æ ·åˆå¯¼è‡´æœåŠ¡æ¥å£å¯¹å¤–æš´éœ²ã€‚</p>
<p>fibjs é’ˆå¯¹æ¡Œé¢åº”ç”¨çš„æ‰©å±•ï¼ŒåŸºäº cef çš„åè®®æ‰©å±•èƒ½åŠ›ï¼Œå°† WebView å’Œ fibjs çš„ <code>Handler</code> èåˆåœ¨ä¸€èµ·ï¼Œä½¿å¾— WebView å¯ä»¥åœ¨è¿›ç¨‹å†…ç›´æ¥è¿æ¥åˆ°å¯¹åº”çš„ <code>Handler</code> å¤„ç†å™¨ï¼Œåœ¨å®Œå…¨å…¼å®¹ä¼ ç»Ÿ B/S å‰åç«¯å¼€å‘èŒƒå¼çš„åŒæ—¶ï¼Œç¡®ä¿äº†å®‰å…¨æ€§å’Œå¯ç§»æ¤æ€§ã€‚åŒæ—¶å‰åç«¯ä»£ç ï¼Œä¹Ÿä¸æ ‡å‡†çš„ B/S å‰åç«¯å¼€å‘å®Œå…¨ä¸€è‡´ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨å†…å¼€å‘è°ƒè¯•ï¼Œç„¶åç›´æ¥ç§»æ¤ä¸ºæœ¬åœ°åº”ç”¨ã€‚</p>
<p>fibjs é…ç½®åç«¯å¤„ç†å™¨çš„æ–¹å¼ï¼Œæ˜¯é€šè¿‡ <code>gui.config</code> å®Œæˆçš„ã€‚</p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</div>gui.config({
    <span class="hljs-string">"backend"</span>: {
        <span class="hljs-string">"cef://test/"</span>: cef_files_path,
        <span class="hljs-string">"http://cef_test/"</span>: {
            <span class="hljs-string">"/mock/:act"</span>: <span class="hljs-function">(<span class="hljs-params">r, a</span>) =&gt;</span> {
                <span class="hljs-keyword">if</span> (a == <span class="hljs-string">'header'</span>) {
                    r.response.write(r.firstHeader(<span class="hljs-string">'test'</span>));
                    r.response.addHeader(<span class="hljs-string">"test"</span>, <span class="hljs-string">"world"</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a == <span class="hljs-string">'post'</span>) {
                    r.response.write(<span class="hljs-string">`[<span class="hljs-subst">${r.firstHeader(<span class="hljs-string">"Content-type"</span>)}</span>]`</span>);
                    r.response.write(r.body.readAll());
                }
            },
            <span class="hljs-string">"/*"</span>: cef_files_path
        }
    }
});
</code></pre>
<p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸¤ä¸ªåç«¯ï¼Œä¸€ä¸ªæ˜¯ <code>cef</code> åè®®çš„ test domainï¼ŒæŒ‡å‘é™æ€ç›®å½• <code>cef_files_path</code>ï¼Œå¦ä¸€ä¸ªæ˜¯ <code>http</code> çš„ cef_test domainï¼ŒæŒ‡å‘ä¸€ä¸ªè·¯ç”±ã€‚</p>
<p>åœ¨ cef é‡Œï¼Œå¯¹éæ ‡å‡†åè®®çš„å¤„ç†æœ‰ä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚ä¸æ”¯æŒå‘æœåŠ¡å™¨ post æ•°æ®ï¼Œå› æ­¤å¦‚æœå¸Œæœ›å…¼å®¹æ€§æ›´å¥½çš„å‰åç«¯é€šä¿¡ï¼Œéœ€è¦å®šä¹‰ http æˆ–è€… https åç«¯ï¼Œå½“ç„¶è¿™ä¸ªåç«¯ä¹Ÿå¹¶ä¸æ˜¯é€šè¿‡ç½‘ç»œåè®®å®Œæˆé€šä¿¡ï¼Œè€Œæ˜¯åœ¨è¿›ç¨‹å†…éƒ¨ç›´æ¥å¯¹æ¥çš„ã€‚</p>
<p>å…³äºå¦‚ä½•å¼€å‘ Handler åç«¯ï¼Œå¯ä»¥å‚é˜…ï¼š<a href=hello.md.html class ="notranslate">hello, world</a>ã€‚</p>
<h2 id="æ— çª—å£æ¨¡å¼">æ— çª—å£æ¨¡å¼</h2>
<p>åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•æˆ–è€…æµç¨‹è‡ªåŠ¨åŒ–åœºæ™¯ä¸­ï¼Œä¸šåŠ¡è¿è¡Œè¿‡ç¨‹æ— éœ€ç”¨æˆ·äº¤äº’ï¼Œå› æ­¤å¯ä»¥ä»¥æ— çª—å£æ¨¡å¼åœ¨æœåŠ¡å™¨ä¸Šè‡ªåŠ¨è¿è¡Œã€‚è¿™æ—¶å°±éœ€è¦ headless æ¨¡å¼æ¥è¿è¡Œã€‚</p>
<p>fibjs æ”¯æŒä¸¤ç§æ–¹å¼çš„ headlessï¼Œåˆ†åˆ«æ˜¯å…¨å±€ headless å’Œå®ä¾‹ headlessã€‚</p>
<p>å…¨å±€æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„çª—å£éƒ½å°†ä»¥ headless æ¨¡å¼è¿è¡Œï¼Œæ— è®ºåˆ›å»ºçª—å£æ˜¯æ˜¯å¦‚ä½•è®¾å®šçš„ã€‚å…¨å±€æ¨¡å¼çš„è¿è¡Œæ–¹å¼ï¼Œæ˜¯æŒ‡å®š <code>--headless</code> å¯åŠ¨é€‰é¡¹ã€‚</p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>fibjs --headless test.js
</code></pre>
<p>åœ¨ç¨‹åºå¯åŠ¨æ—¶è°ƒç”¨ <code>gui.config</code> é…ç½®ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„ç›®æ ‡ï¼š</p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3</div>gui.config({
    <span class="hljs-string">"headless"</span>: <span class="hljs-literal">true</span>
});
</code></pre>
<p>åœ¨ Linux Server ä¸‹ï¼Œè™½ç„¶ headless æ¨¡å¼ä¸éœ€è¦æ¡Œé¢æ”¯æŒï¼Œä½†æ˜¯ cef åŸºç¡€æ¨¡å—ä»éœ€è¦ä¸€äº›åŸºç¡€ç»„ä»¶æ”¯æŒï¼Œå› æ­¤éœ€è¦å®‰è£… xorgï¼š</p>
<pre><code class="lang-sh"><div class="line-numbers">1</div>apt install xorg
</code></pre>
<p>åœ¨ä¸€äº›åº”ç”¨é‡Œï¼Œéœ€è¦åŒæ—¶å­˜åœ¨ç”¨æˆ·äº¤äº’å’Œè‡ªåŠ¨åŒ–å¤„ç†ï¼Œè¿™æ—¶å¯ä»¥å•ç‹¬æŒ‡å®šæŸä¸ªçª—å£ä½¿ç”¨ headless æ¨¡å¼ï¼š</p>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3</div><span class="hljs-keyword">var</span> win = gui.open(<span class="hljs-string">"https://fibjs.org"</span>, {
    <span class="hljs-string">"headless"</span>: <span class="hljs-literal">true</span>
});
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œheadless å®ä¾‹å› ä¸ºæ²¡æœ‰ç”¨æˆ·äº¤äº’ï¼Œä¸èƒ½è¢«ç”¨æˆ·ä¸»åŠ¨å…³é—­ï¼Œå› æ­¤ç¨‹åºè¦åœ¨ä¸éœ€è¦çš„æ—¶å€™è‡ªè¡Œå…³é—­ï¼Œå¦åˆ™å› ä¸ºå®ä¾‹çš„å­˜åœ¨ï¼Œè¿›ç¨‹å°†ä¸ä¼šè‡ªåŠ¨é€€å‡ºã€‚</p>
<h2 id="DevTools-æ¥å£">DevTools æ¥å£</h2>
<p>Chrome DevTools Protocol å…è®¸å·¥å…·å¯¹ Chromiumï¼ŒChrome å’Œå…¶å®ƒåŸºäº Blink çš„æµè§ˆå™¨è¿›è¡Œæµ‹è¯•ã€æ£€æŸ¥ã€è°ƒè¯•ä»¥åŠé…ç½®ã€‚Chrome DevTools Protocol è¢«åˆ†ä¸ºå¤šä¸ªåŸŸï¼ˆDOMï¼ŒDebuggerï¼ŒNetwork ç­‰ï¼‰ï¼Œæ¯ä¸ªåŸŸå®šä¹‰äº†ç›¸åº”æ”¯æŒçš„ commands å’Œç›¸å…³çš„ eventsã€‚</p>
<p>fibjs å°è£…äº† cdp çš„è®¿é—®æ¥å£ï¼Œå¯ä»¥å……åˆ†è¿ç”¨ cef å†…ç½®çš„ cdp æ¥å£ï¼Œç›´æ¥è°ƒè¯• WebView å†…çš„ç½‘é¡µã€‚WebView ç”¨äºè®¿é—® cdp æœåŠ¡çš„æ¥å£ï¼Œæ˜¯ WebView.devã€‚å…³äº cdp çš„è¯¦ç»†æ–‡æ¡£ï¼Œå¯ä»¥å‚é˜…ï¼š<a href="https://chromedevtools.github.io/devtools-protocol/">https://chromedevtools.github.io/devtools-protocol/</a></p>
<p>ä»¥ä¸‹åˆ—ä¸¾çš„æ˜¯å‡ ä¸ªå¸¸ç”¨çš„ä»£ç ç‰‡æ®µï¼Œç”¨äºå±•ç¤ºå¦‚ä½•ä½¿ç”¨ dev æ“æ§é¡µé¢å…ƒç´ ã€‚è¯¦ç»†çš„ä½¿ç”¨æ¼”ç¤ºï¼Œå¯ä»¥å‚é˜… <code>test/cef_test.js</code>ã€‚</p>
<h3 id="æŸ¥è¯¢-DOM">æŸ¥è¯¢ DOM</h3>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13</div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOuterHTML</span>(<span class="hljs-params">win, selector</span>) </span>{
    <span class="hljs-keyword">var</span> doc = win.dev.DOM.getDocument();
    <span class="hljs-keyword">var</span> e = win.dev.DOM.querySelector({
        <span class="hljs-string">"nodeId"</span>: doc.root.nodeId,
        <span class="hljs-string">"selector"</span>: selector
    });

    <span class="hljs-keyword">var</span> html = win.dev.DOM.getOuterHTML({
        <span class="hljs-string">"nodeId"</span>: e.nodeId
    });

    <span class="hljs-keyword">return</span> html.outerHTML;
}
</code></pre>
<h3 id="æ¨¡æ‹Ÿé¼ æ ‡æ“ä½œ">æ¨¡æ‹Ÿé¼ æ ‡æ“ä½œ</h3>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">click</span>(<span class="hljs-params">win, selector</span>) </span>{
    <span class="hljs-keyword">var</span> doc = win.dev.DOM.getDocument();
    <span class="hljs-keyword">var</span> e = win.dev.DOM.querySelector({
        <span class="hljs-string">"nodeId"</span>: doc.root.nodeId,
        <span class="hljs-string">"selector"</span>: selector
    });

    <span class="hljs-keyword">var</span> box = win.dev.DOM.getBoxModel({
        <span class="hljs-string">"nodeId"</span>: e.nodeId
    });

    <span class="hljs-keyword">var</span> mi = {
        <span class="hljs-string">"x"</span>: box.model.content[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>,
        <span class="hljs-string">"y"</span>: box.model.content[<span class="hljs-number">1</span>] + <span class="hljs-number">1</span>,
        <span class="hljs-string">"button"</span>: <span class="hljs-string">'left'</span>,
        <span class="hljs-string">"clickCount"</span>: <span class="hljs-number">1</span>
    }

    mi.type = <span class="hljs-string">"mousePressed"</span>;
    win.dev.Input.dispatchMouseEvent(mi);

    mi.type = <span class="hljs-string">"mouseReleased"</span>;
    win.dev.Input.dispatchMouseEvent(mi);
}
</code></pre>
<h3 id="æ¨¡æ‹Ÿé”®ç›˜æ“ä½œ">æ¨¡æ‹Ÿé”®ç›˜æ“ä½œ</h3>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">type</span>(<span class="hljs-params">win, text</span>) </span>{
    <span class="hljs-keyword">for</span> (char <span class="hljs-keyword">of</span> text) {
        win.dev.Input.dispatchKeyEvent({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"char"</span>,
            <span class="hljs-string">"text"</span>: char
        });
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">press</span>(<span class="hljs-params">win, key</span>) </span>{
    <span class="hljs-keyword">var</span> code = key_code[key];
    <span class="hljs-keyword">var</span> ki = {
        <span class="hljs-string">"key"</span>: key,
        <span class="hljs-string">"code"</span>: key,
        <span class="hljs-string">"windowsVirtualKeyCode"</span>: code,
        <span class="hljs-string">"nativeVirtualKeyCode"</span>: code
    };

    ki.type = <span class="hljs-string">"keyDown"</span>;
    win.dev.Input.dispatchKeyEvent(ki);

    ki.type = <span class="hljs-string">"keyUp"</span>;
    win.dev.Input.dispatchKeyEvent(ki);
}
</code></pre>
<h3 id="é¡µé¢æˆªå±">é¡µé¢æˆªå±</h3>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9
10
11</div><span class="hljs-keyword">var</span> ret = win.dev.Page.captureScreenshot({
    <span class="hljs-attr">clip</span>: {
        <span class="hljs-string">"x"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"y"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"width"</span>: <span class="hljs-number">100</span>,
        <span class="hljs-string">"height"</span>: <span class="hljs-number">100</span>,
        <span class="hljs-string">"scale"</span>: <span class="hljs-number">1</span>
    }
});

<span class="hljs-keyword">var</span> img = gd.load(encoding.base64.decode(ret.data));
</code></pre>
<h3 id="æ¨¡æ‹Ÿ-User-Agent">æ¨¡æ‹Ÿ User-Agent</h3>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9</div><span class="hljs-keyword">var</span> win = gui.open();

win.on(<span class="hljs-string">'open'</span>, () =&gt; {
    win.dev.Network.setUserAgentOverride({
        <span class="hljs-attr">userAgent</span>: <span class="hljs-string">'Mozilla/5.0 (iPhone; CPU iPhone OS 10_0_1 like Mac OS X) AppleWebKit/602.1.50 (KHTML, like Gecko) Version/10.0 Mobile/14A403 Safari/602.1'</span>,
    });

    win.loadUrl(<span class="hljs-string">'https://fibjs.org'</span>);
});
</code></pre>
<h3 id="ç›‘å¬äº‹ä»¶">ç›‘å¬äº‹ä»¶</h3>
<pre><code class="lang-JavaScript"><div class="line-numbers">1
2
3
4
5
6
7
8
9</div><span class="hljs-keyword">var</span> win = gui.open();

win.on(<span class="hljs-string">'open'</span>, () =&gt; {
    win.dev.Page.enable();
    win.dev.Page.on(<span class="hljs-string">"frameNavigated"</span>, ev =&gt; {
        <span class="hljs-built_in">console</span>.log(ev.frame.url);
        win.close();
    });
});
</code></pre>
<h2 id="å¤šåª’ä½“æ”¯æŒ">å¤šåª’ä½“æ”¯æŒ</h2>
<p>å› ä¸ºç‰ˆæƒé—®é¢˜ï¼Œcef çš„äºŒè¿›åˆ¶å‘è¡Œç‰ˆä¸­é€šå¸¸ä¸åŒ…å« mp4 å’Œ mp3 çš„è§£ç ã€‚ä½†æ˜¯ cef ä¸­åŒ…å«å¼€æºçš„ webm è§£ç ï¼Œå¯¹äºç‹¬ç«‹çš„æ¡Œé¢åº”ç”¨ï¼Œå»ºè®®ä½¿ç”¨å…è´¹æˆæƒçš„ webm ç¼–ç å¤„ç†éŸ³é¢‘å’Œè§†é¢‘ã€‚</p>
<h2 id="å°ç»“">å°ç»“</h2>
<p>é€šè¿‡è¿™ä¸ªå°èŠ‚çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿå¼€å‘è‡ªå·±çš„æ¡Œé¢åº”ç”¨ï¼Œå°† html æ¸²æŸ“æˆå›¾ç‰‡æˆ–è€… PDFï¼Œåˆ©ç”¨ cdp çš„å¼ºå¤§æ¥å£å»ºç«‹å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•å’Œæµç¨‹è‡ªåŠ¨åŒ–å¼•æ“ã€‚</p>
<p>ğŸ‘‰ ã€<a href=server-hot-update.md.html>æœåŠ¡ç«¯æ¨¡å—çƒ­æ›´æ–°</a>ã€‘</p>
 </div><div class="sidebar hidden-sm hidden-xs hidden-md"><div id=toc></div></div></div></div><div class=footer><div class=container>&copy; Copyright 2012-2021 fibjs.org | <a href=../../support.html>æ”¯æŒæˆ‘ä»¬</a></div></div><a id=back-to-top href=# class="btn btn-default btn-lg back-to-top" role=button title="Click to return on the top page" data-toggle=tooltip data-placement=left><span class="glyphicon glyphicon-chevron-up"></span></a><script type=text/javascript src=https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js></script><script type=text/javascript src=../../js/common.js></script><script type=text/javascript src=../../js/docs.js></script></body></html>